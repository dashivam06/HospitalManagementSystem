
CREATE DATABASE HOSPITALMANAGEMENTSYSTEM;


CREATE TABLE PATIENTS(
        ID SERIAL PRIMARY KEY , 
        Name VARCHAR(100) NOT NULL ,
        AGE INT NOT NULL , 
        Gender VARCHAR(15) NOT NULL);



CREATE TABLE DOCTORS(
        ID SERIAL PRIMARY KEY ,
        Name VARCHAR(255) NOT NULL ,  
        Specialization VARCHAR(100) NOT NULL)


CREATE TABLE APPOINTMENTS(
        ID SERIAL PRIMARY KEY , 
        PatientID INT NOT NULL , 
        DoctorID INT NOT NULL , 
        AppointmentDate DATE NOT NULL ,
        FOREIGN KEY (PatientID) REFERENCES Patient(ID), 
        FOREIGN KEY (DoctorID) REFERENCES Doctor(ID) );

CREATE SEQUENCE INVOICE_ID_SEQUENCE START WITH 2315;

CREATE TABLE INVOICE (
        InvoiceID INT PRIMARY KEY DEFAULT NEXTVAL('INVOICE_ID_SEQUENCE'),
        AppointmentID INT NOT NULL,
        PaymentMethod VARCHAR(100) NOT NULL DEFAULT 'CASH',
        Amount DECIMAL(10,2) NOT NULL,
        TransactionDate DATE NOT NULL DEFAULT CURRENT_DATE,
        FOREIGN KEY (AppointmentID) REFERENCES APPOINTMENTS(ID)
);

SELECT 
    PATIENTS.Name AS PatientName,
    PATIENTS.ID AS PatientID,
    PATIENTS.Age,
    PATIENTS.Gender,
    INVOICE.InvoiceID,
    INVOICE.PaymentMethod,
    DOCTORS.Name AS DoctorName,
    DOCTORS.Specialization,
    DOCTORS.Fees,
    APPOINTMENTS.AppointmentDate,
    INVOICE.Amount
FROM 
    PATIENTS PATIENTS
JOIN 
    APPOINTMENTS a ON PATIENTS.ID = APPOINTMENTS.PatientID
JOIN 
    DOCTORS d ON APPOINTMENTSDoctorID = DOCTORS.ID
JOIN 
    INVOICE i ON APPOINTMENTSID = INVOICE.AppointmentID;




SELECT DOCTORS.Specialization
FROM APPOINTMENTS
JOIN DOCTORS ON APPOINTMENTS.DoctorID = DOCTORS.ID
WHERE APPOINTMENTS.ID = 3;
